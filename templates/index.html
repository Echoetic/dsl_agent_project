<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DSLæ™ºèƒ½Agentç³»ç»Ÿ</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        .top-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            padding: 12px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .top-nav .logo {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }
        
        .top-nav .user-menu {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .top-nav .user-info {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #666;
        }
        
        .top-nav .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
        }
        
        .top-nav .nav-link {
            color: #667eea;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 6px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .top-nav .nav-link:hover {
            background: #f0f0f0;
        }
        
        .top-nav .nav-link.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .top-nav .nav-link.primary:hover {
            opacity: 0.9;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        body {
            padding-top: 70px;
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <nav class="top-nav">
        <div class="logo">ğŸ¤– DSLæ™ºèƒ½Agent</div>
        <div class="user-menu">
            {% if user %}
            <div class="user-info">
                <div class="user-avatar">{{ user.username[0].upper() }}</div>
                <span>{{ user.username }}</span>
            </div>
            <a href="/profile" class="nav-link">ä¸ªäººèµ„æ–™</a>
            <a href="#" class="nav-link" onclick="handleLogout()">é€€å‡º</a>
            {% else %}
            <a href="/login" class="nav-link">ç™»å½•</a>
            <a href="/register" class="nav-link primary">æ³¨å†Œ</a>
            {% endif %}
        </div>
    </nav>

    <div class="container">
        <header class="hero">
            <div class="hero-content">
                <h1>ğŸ¤– DSLæ™ºèƒ½Agentç³»ç»Ÿ</h1>
                <p class="subtitle">åŸºäºé¢†åŸŸç‰¹å®šè¯­è¨€çš„å¤šä¸šåŠ¡åœºæ™¯æ™ºèƒ½å®¢æœ</p>
                <p class="description">
                    æœ¬ç³»ç»Ÿé‡‡ç”¨è‡ªå®šä¹‰DSLè„šæœ¬è¯­è¨€æè¿°ä¸šåŠ¡æµç¨‹ï¼Œç»“åˆGeminiå¤§è¯­è¨€æ¨¡å‹è¿›è¡Œæ„å›¾è¯†åˆ«ï¼Œ
                    å®ç°çµæ´»å¯é…ç½®çš„æ™ºèƒ½å¯¹è¯æœºå™¨äººã€‚
                </p>
                {% if not user %}
                <p style="margin-top: 20px;">
                    <a href="/register" style="color: white; background: rgba(255,255,255,0.2); padding: 12px 24px; border-radius: 8px; text-decoration: none; font-weight: 600;">
                        ç«‹å³æ³¨å†Œï¼Œå¼€å§‹ä½“éªŒ â†’
                    </a>
                </p>
                {% endif %}
            </div>
        </header>

        <main class="scenarios">
            <h2>é€‰æ‹©ä¸šåŠ¡åœºæ™¯</h2>
            <div class="scenario-grid">
                <a href="/chat/hospital" class="scenario-card hospital">
                    <div class="card-icon">ğŸ¥</div>
                    <h3>åŒ»é™¢æ™ºèƒ½å®¢æœ</h3>
                    <p>çœ‹ç—…æŒ‚å·ã€ç¼´è´¹ã€å–è¯ä¸€ç«™å¼æœåŠ¡</p>
                    <ul class="features">
                        <li>æ™ºèƒ½ç§‘å®¤æ¨è</li>
                        <li>åœ¨çº¿é¢„çº¦æŒ‚å·</li>
                        <li>è´¹ç”¨æŸ¥è¯¢ç¼´çº³</li>
                        <li>å–è¯è¿›åº¦æŸ¥è¯¢</li>
                    </ul>
                    <span class="btn">å¼€å§‹å¯¹è¯ â†’</span>
                </a>

                <a href="/chat/restaurant" class="scenario-card restaurant">
                    <div class="card-icon">ğŸ½ï¸</div>
                    <h3>é¤å…ç‚¹é¤åŠ©æ‰‹</h3>
                    <p>æ™ºèƒ½ç‚¹é¤ã€èœå“æ¨èã€ä¾¿æ·ä»˜è´¦</p>
                    <ul class="features">
                        <li>èœå•æµè§ˆæ¨è</li>
                        <li>è¯­éŸ³ç‚¹é¤ä¸‹å•</li>
                        <li>è®¢å•ç®¡ç†ä¿®æ”¹</li>
                        <li>å¤šç§æ”¯ä»˜æ–¹å¼</li>
                    </ul>
                    <span class="btn">å¼€å§‹å¯¹è¯ â†’</span>
                </a>

                <a href="/chat/theater" class="scenario-card theater">
                    <div class="card-icon">ğŸ­</div>
                    <h3>å‰§é™¢å”®ç¥¨æœåŠ¡</h3>
                    <p>æ¼”å‡ºæŸ¥è¯¢ã€åœ¨çº¿è´­ç¥¨ã€ä¾¿æ·å–ç¥¨</p>
                    <ul class="features">
                        <li>æ¼”å‡ºä¿¡æ¯æŸ¥è¯¢</li>
                        <li>åº§ä½é€‰æ‹©è´­ç¥¨</li>
                        <li>ç”µå­ç¥¨å–ç¥¨</li>
                        <li>ä¼šå‘˜ç§¯åˆ†æœåŠ¡</li>
                    </ul>
                    <span class="btn">å¼€å§‹å¯¹è¯ â†’</span>
                </a>
            </div>
        </main>

        <section class="tech-info">
            <h2>æŠ€æœ¯æ¶æ„</h2>
            <div class="tech-grid">
                <div class="tech-card">
                    <h4>ğŸ”¤ è¯æ³•åˆ†æå™¨ (Lexer)</h4>
                    <p>å°†DSLè„šæœ¬æ–‡æœ¬è½¬æ¢ä¸ºTokenåºåˆ—ï¼Œæ”¯æŒå…³é”®å­—ã€å­—ç¬¦ä¸²ã€æ•°å­—ã€å˜é‡ç­‰å¤šç§è¯æ³•å…ƒç´ ã€‚</p>
                </div>
                <div class="tech-card">
                    <h4>ğŸ“Š è¯­æ³•åˆ†æå™¨ (Parser)</h4>
                    <p>åŸºäºé€’å½’ä¸‹é™ç®—æ³•ï¼Œå°†Tokenåºåˆ—è§£æä¸ºæŠ½è±¡è¯­æ³•æ ‘(AST)ï¼Œæ”¯æŒè¡¨è¾¾å¼è§£æå’Œé”™è¯¯æ¢å¤ã€‚</p>
                </div>
                <div class="tech-card">
                    <h4>âš™ï¸ è§£é‡Šå™¨ (Interpreter)</h4>
                    <p>éå†æ‰§è¡ŒASTï¼Œç®¡ç†ä¼šè¯çŠ¶æ€å’Œå˜é‡ï¼Œæ”¯æŒå¤šä¼šè¯å¹¶å‘å¤„ç†ã€‚</p>
                </div>
                <div class="tech-card">
                    <h4>ğŸ§  æ„å›¾è¯†åˆ« (LLM)</h4>
                    <p>é›†æˆGoogle Gemini APIï¼Œå°†è‡ªç„¶è¯­è¨€è½¬æ¢ä¸ºé¢„å®šä¹‰æ„å›¾ï¼Œæ”¯æŒå®ä½“æŠ½å–ã€‚</p>
                </div>
            </div>
        </section>

        <section class="dsl-info">
            <h2>DSLè¯­æ³•ç¤ºä¾‹</h2>
            <pre class="code-block"><code># æ­¥éª¤å®šä¹‰
Step welcome
    Speak "æ‚¨å¥½ï¼Œè¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨ï¼Ÿ"
    Listen 5, 30
    Branch "æŒ‚å·", registration
    Branch "ç¼´è´¹", payment
    Default defaultHandler

Step registration
    Set $department = "å†…ç§‘"
    Speak "æ‚¨é€‰æ‹©äº†" + $department
    Call åˆ›å»ºæŒ‚å·($department) = $result
    Exit</code></pre>
        </section>

        <footer>
            <p>2025 ç¨‹åºè®¾è®¡å®è·µå¤§ä½œä¸š - åŸºäºDSLçš„å¤šä¸šåŠ¡åœºæ™¯Agent</p>
            <p>åŒ—äº¬é‚®ç”µå¤§å­¦ è®¡ç®—æœºå­¦é™¢</p>
        </footer>
    </div>
    
    <script>
        async function handleLogout() {
            try {
                await fetch('/api/auth/logout', { method: 'POST' });
                window.location.reload();
            } catch (error) {
                alert('ç™»å‡ºå¤±è´¥ï¼Œè¯·é‡è¯•');
            }
        }
    </script>
</body>
</html>